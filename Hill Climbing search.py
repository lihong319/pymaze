# --- Hill Climbing with (1,1) as Top-Left Goal (Row, Column format) ---

def manhattan(p1, p2):
    return abs(p1[0] - p2[0]) + abs(p1[1] - p2[1])

def get_valid_neighbors(pos, maze_map):
    row, col = pos
    neighbors = []
    if maze_map[pos]['N'] == 1 and (row - 1, col) in maze_map:
        neighbors.append((row - 1, col))
    if maze_map[pos]['S'] == 1 and (row + 1, col) in maze_map:
        neighbors.append((row + 1, col))
    if maze_map[pos]['E'] == 1 and (row, col + 1) in maze_map:
        neighbors.append((row, col + 1))
    if maze_map[pos]['W'] == 1 and (row, col - 1) in maze_map:
        neighbors.append((row, col - 1))
    return neighbors

def hill_climbing(maze_map, start, goal):
    current = start
    path = [current]
    visited = set()
    visited.add(current)

    print("Starting Hill Climbing Search on Maze Dictionary...\n")
    step = 1

    while current != goal:
        print(f"Step {step}:")
        print(f"  Current Position: {current}")
        print(f"  Heuristic (to goal): {manhattan(current, goal)}")
        neighbors = get_valid_neighbors(current, maze_map)
        neighbors = [n for n in neighbors if n not in visited]
        print(f"  Neighbors: {neighbors}")

        if not neighbors:
            print("  ❌ No unvisited neighbors. Stuck.")
            break

        next_move = min(neighbors, key=lambda pos: manhattan(pos, goal))
        print(f"  Best move: {next_move} with h = {manhattan(next_move, goal)}")

        if manhattan(next_move, goal) < manhattan(current, goal):
            current = next_move
            path.append(current)
            visited.add(current)
        else:
            print("  ⚠️ No better neighbor found. Local maximum reached.")
            break

        print()
        step += 1

    if current == goal:
        print("\n✅ Goal reached!")
        print("Final Path:", path)
        return path
    else:
        print("\n❌ Goal not reached.")
        print("Partial Path:", path)
        return None

# --- Maze Map ---
maze_map = {
(1, 1): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(2, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(3, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(4, 1): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(5, 1): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(6, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(7, 1): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(8, 1): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(9, 1): {'E': 1, 'W': 0, 'N': 1, 'S': 1}, 
(10, 1): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(11, 1): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(12, 1): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(1, 2): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(2, 2): {'E': 1, 'W': 0, 'N': 1, 'S': 1}, 
(3, 2): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(4, 2): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(5, 2): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(6, 2): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(7, 2): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(8, 2): {'E': 0, 'W': 1, 'N': 0, 'S': 0}, 
(9, 2): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(10, 2): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(11, 2): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(12, 2): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(1, 3): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(2, 3): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(3, 3): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(4, 3): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(5, 3): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(6, 3): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(7, 3): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(8, 3): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(9, 3): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(10, 3): {'E': 1, 'W': 0, 'N': 0, 'S': 0}, 
(11, 3): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(12, 3): {'E': 1, 'W': 1, 'N': 1, 'S': 0}, 
(1, 4): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(2, 4): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(3, 4): {'E': 0, 'W': 1, 'N': 1, 'S': 1}, 
(4, 4): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(5, 4): {'E': 0, 'W': 1, 'N': 0, 'S': 0}, 
(6, 4): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(7, 4): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(8, 4): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(9, 4): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(10, 4): {'E': 0, 'W': 1, 'N': 1, 'S': 1}, 
(11, 4): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(12, 4): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(1, 5): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(2, 5): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(3, 5): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(4, 5): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(5, 5): {'E': 1, 'W': 0, 'N': 1, 'S': 1}, 
(6, 5): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(7, 5): {'E': 0, 'W': 0, 'N': 1, 'S': 0}, 
(8, 5): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(9, 5): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(10, 5): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(11, 5): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(12, 5): {'E': 1, 'W': 0, 'N': 0, 'S': 0}, 
(1, 6): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(2, 6): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(3, 6): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(4, 6): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(5, 6): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(6, 6): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(7, 6): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(8, 6): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(9, 6): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(10, 6): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(11, 6): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(12, 6): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(1, 7): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(2, 7): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(3, 7): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(4, 7): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(5, 7): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(6, 7): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(7, 7): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(8, 7): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(9, 7): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(10, 7): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(11, 7): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(12, 7): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(1, 8): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(2, 8): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(3, 8): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(4, 8): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(5, 8): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(6, 8): {'E': 1, 'W': 0, 'N': 0, 'S': 0}, 
(7, 8): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(8, 8): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(9, 8): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(10, 8): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(11, 8): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(12, 8): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(1, 9): {'E': 1, 'W': 1, 'N': 0, 'S': 1}, 
(2, 9): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(3, 9): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(4, 9): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(5, 9): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(6, 9): {'E': 1, 'W': 1, 'N': 1, 'S': 0}, 
(7, 9): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(8, 9): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(9, 9): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(10, 9): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(11, 9): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(12, 9): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(1, 10): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(2, 10): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(3, 10): {'E': 1, 'W': 0, 'N': 1, 'S': 1}, 
(4, 10): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(5, 10): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(6, 10): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(7, 10): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(8, 10): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(9, 10): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(10, 10): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(11, 10): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(12, 10): {'E': 1, 'W': 1, 'N': 1, 'S': 0}, 
(1, 11): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(2, 11): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(3, 11): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(4, 11): {'E': 0, 'W': 0, 'N': 1, 'S': 0}, 
(5, 11): {'E': 1, 'W': 0, 'N': 0, 'S': 1}, 
(6, 11): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(7, 11): {'E': 1, 'W': 1, 'N': 1, 'S': 0}, 
(8, 11): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(9, 11): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(10, 11): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(11, 11): {'E': 1, 'W': 0, 'N': 1, 'S': 0}, 
(12, 11): {'E': 1, 'W': 1, 'N': 0, 'S': 0}, 
(1, 12): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(2, 12): {'E': 0, 'W': 1, 'N': 1, 'S': 1}, 
(3, 12): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(4, 12): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(5, 12): {'E': 0, 'W': 1, 'N': 1, 'S': 0}, 
(6, 12): {'E': 0, 'W': 0, 'N': 0, 'S': 1}, 
(7, 12): {'E': 0, 'W': 1, 'N': 1, 'S': 1}, 
(8, 12): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(9, 12): {'E': 0, 'W': 0, 'N': 1, 'S': 1}, 
(10, 12): {'E': 0, 'W': 0, 'N': 1, 'S': 0}, 
(11, 12): {'E': 0, 'W': 1, 'N': 0, 'S': 1}, 
(12, 12): {'E': 0, 'W': 1, 'N': 1, 'S': 0}
}

# --- Use (1,1) as the Top-Left Goal ---
start = (12,12)
goal = (1, 1)

result = hill_climbing(maze_map, start, goal)
